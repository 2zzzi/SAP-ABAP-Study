*&---------------------------------------------------------------------*
*& Report ZEDR05_20230403
*&---------------------------------------------------------------------*
*&
*&---------------------------------------------------------------------*
REPORT ZEDR05_20230403.

data : BEGIN OF GS_STUDENT,
  ZCODE TYPE C LENGTH 10,
  ZKNAME TYPE C LENGTH 10,
  ZENAME TYPE C LENGTH 10,
  ZGUBUN TYPE C,
  ZGNAME TYPE C LENGTH 10,
END OF GS_STUDENT.

DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT.

CLEAR : GS_STUDENT.
GS_STUDENT-ZCODE = 'SSU-01'.
GS_STUDENT-ZKNAME = '강동원'.
GS_STUDENT-ZENAME = 'DONG'.
GS_STUDENT-ZGUBUN = 'M'.
APPEND GS_STUDENT TO GT_STUDENT.

CLEAR : GS_STUDENT.
GS_STUDENT-ZCODE = 'SSU-02'.
GS_STUDENT-ZKNAME = '이제훈'.
GS_STUDENT-ZENAME = 'LEE'.
GS_STUDENT-ZGUBUN = 'M'.
APPEND GS_STUDENT TO GT_STUDENT.

CLEAR : GS_STUDENT.
GS_STUDENT-ZCODE = 'SSU-03'.
GS_STUDENT-ZKNAME = '손예진'.
GS_STUDENT-ZENAME = 'SON'.
GS_STUDENT-ZGUBUN = 'F'.
APPEND GS_STUDENT TO GT_STUDENT.


**-----------------1. 기본 읽기-------------------------*
*CLEAR : GS_STUDENT.
*
*LOOP AT GT_STUDENT INTO GS_STUDENT.
*  IF GS_STUDENT-ZGUBUN = 'M'.
*    GS_STUDENT-ZGNAME = '남자'.
*  ELSEIF GS_STUDENT-ZGUBUN = 'F'.
*    GS_STUDENT-ZGNAME = '여자'.
*  ELSE.
*    GS_STUDENT-ZGNAME = '기타'.
*  ENDIF.
*
*  BREAK-POINT. "SY-TABIX가 증가함을 볼 수 있음.
*  CLEAR : GS_STUDENT.
*ENDLOOP.

*-----------------2. 조건절 제어 - WHERE-------------------------*
*CLEAR : GS_STUDENT.

"1. ZGUBUN이 F일때 위 로직 베껴오기.
*LOOP AT GT_STUDENT INTO GS_STUDENT WHERE ZGUBUN = 'F'.
*  IF GS_STUDENT-ZGUBUN = 'M'.
*    GS_STUDENT-ZGNAME = '남자'.
*  ELSEIF GS_STUDENT-ZGUBUN = 'F'.
*    GS_STUDENT-ZGNAME = '여자'.
*  ELSE.
*    GS_STUDENT-ZGNAME = '기타'.
*  ENDIF.
*
*  BREAK-POINT. "SY-TABIX가 증가함을 볼 수 있음.
*  CLEAR : GS_STUDENT.
*ENDLOOP.

*"2.1. ZGUBUN이 F일때 WHERE
*LOOP AT GT_STUDENT INTO GS_STUDENT WHERE ZGUBUN = 'F'.
*  GS_STUDENT-ZGNAME = '여자'.
*  BREAK-POINT. "이땐 TABIX가 바로 3으로 감
*
*  CLEAR : GS_STUDENT.
*ENDLOOP.

*"2.2. ZGUBUN이 F일때 IF // 이게 더 BEST
*LOOP AT GT_STUDENT INTO GS_STUDENT.
*
*  IF GS_STUDENT-ZGUBUN = 'F'.
*    GS_STUDENT-ZGNAME = '여자'.
*  ENDIF.
*
*  BREAK-POINT."이땐 TABIX가 1부터 순차적으로 순회.
*  CLEAR : GS_STUDENT.
*ENDLOOP.

**-----------------3. INDEX로 읽기-------------------------*
*LOOP AT GT_STUDENT INTO GS_STUDENT FROM 2 TO 3.
*  IF GS_STUDENT-ZGUBUN = 'M'.
*    GS_STUDENT-ZGNAME = '남자'.
*  ELSEIF GS_STUDENT-ZGUBUN = 'F'.
*    GS_STUDENT-ZGNAME = '여자'.
*  ELSE.
*    GS_STUDENT-ZGNAME = '기타'.
*  ENDIF.
*
*  BREAK-POINT.
*
*  CLEAR : GS_STUDENT.
*ENDLOOP.

**-----------------internal table 변경-------------------------*
*"1. 테이블 키를 이용한 라인 변경
*
*data : BEGIN OF GS_STUDENT1,
*  ZCODE TYPE C LENGTH 10,
*  ZKNAME TYPE C LENGTH 10,
*  ZENAME TYPE C LENGTH 10,
*  ZGUBUN TYPE C,
*  ZGNAME TYPE C LENGTH 10,
*END OF GS_STUDENT1.
*
*DATA : GT_STUDENT1 LIKE TABLE OF GS_STUDENT1 WITH NON-UNIQUE KEY ZCODE. "테이블 생성시 키 지정
*
*CLEAR : GS_STUDENT1.
*GS_STUDENT1-ZCODE = 'SSU-01'.
*GS_STUDENT1-ZKNAME = '강동원'.
*GS_STUDENT1-ZENAME = 'DONG'.
*GS_STUDENT1-ZGUBUN = 'F'.
*APPEND GS_STUDENT1 TO GT_STUDENT1.
*
**BREAK-POINT.
*
*GS_STUDENT1-ZENAME = 'KANG'. "GS_STUDENT1의 ENAME은 바뀌지만 TRANSPROTING한 ZGUBUN만 테이블에 적용됨.
*GS_STUDENT1-ZGUBUN = 'M'.
*MODIFY TABLE GT_STUDENT1 FROM GS_STUDENT1 TRANSPORTING ZGUBUN.
*
*BREAK-POINT.


*"WHERE조건을 이용행 여러 라인 변경
*LOOP AT GT_STUDENT INTO GS_STUDENT.
*  IF GS_STUDENT-ZGUBUN = 'M'.
*    GS_STUDENT-ZGNAME = '남자'.
*  ELSEIF GS_STUDENT-ZGUBUN = 'F'.
*    GS_STUDENT-ZGNAME = '여자'.
*  ELSE.
*    GS_STUDENT-ZGNAME = '기타'.
*  ENDIF.
*
*  MODIFY GT_STUDENT FROM GS_STUDENT TRANSPORTING ZGNAME WHERE ZCODE = GS_STUDENT-ZCODE.
*
*  BREAK-POINT.
*  CLEAR : GS_STUDENT.
*ENDLOOP.

"INDEX를 이용해 한 라인 변경
LOOP AT GT_STUDENT INTO GS_STUDENT.
  IF GS_STUDENT-ZGUBUN = 'M'.
    GS_STUDENT-ZGNAME = '남자'.
  ELSEIF GS_STUDENT-ZGUBUN = 'F'.
    GS_STUDENT-ZGNAME = '여자'.
  ELSE.
    GS_STUDENT-ZGNAME = '기타'.
  ENDIF.

  MODIFY GT_STUDENT FROM GS_STUDENT INDEX SY-TABIX.

  BREAK-POINT.

  CLEAR GS_STUDENT.

ENDLOOP.